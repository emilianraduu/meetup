{"ast":null,"code":"var _jsxFileName = \"/Users/emilian.radu/Developer/AIProject/frontend/src/components/Timetable/listing/TimetableListingWeb.js\";\nimport React, { useContext, useEffect } from 'react';\nimport { PageContent } from '../../../styles/shared/wrapper';\nimport FiltersWeb from '../../Global/Filter/FiltersWeb';\nimport { Loader } from '../../Global/InfiniteScroll';\nimport EmptyData from \"../../Global/EmptyData/EmptyData\";\nimport moment from 'moment-timezone';\nimport { withRouter } from 'react-router-dom';\nimport { FormItem, StaffFormFooter } from \"../../../styles/shared/form\";\nimport { SecondaryButton } from \"../../../styles/shared/button\";\nimport { assignTimetable } from \"../TimetableActions\";\nimport { AuthContext } from \"../../Auth/AuthContext\";\nimport { TimetableContext } from \"../TimetableContext\";\nimport { CoursesContext } from \"../../Courses/CoursesContext\";\nimport { getCourses } from \"../../Courses/CoursesActions\";\nimport { getUsers } from \"../../Auth/AuthActions\";\nimport { RoomsContext } from \"../../Rooms/RoomsContext\";\nimport { getRooms } from \"../../Rooms/RoomsActions\";\nimport { Calendar, momentLocalizer } from 'react-big-calendar';\nimport Timetable from \"./Timetable\";\n\nfunction TimetableListingWeb({\n  timetable,\n  filters,\n  filterFields,\n  removeFilter,\n  handleFilter,\n  loading,\n  history,\n  scheduler\n}) {\n  const authContext = useContext(AuthContext);\n  const timetableContext = useContext(TimetableContext);\n  const coursesContext = useContext(CoursesContext);\n  const {\n    courses\n  } = coursesContext.state;\n  const events = [];\n  let ev = [];\n  const {\n    users\n  } = authContext.state;\n  const roomsContext = useContext(RoomsContext);\n  const {\n    rooms\n  } = roomsContext.state;\n  useEffect(() => {\n    getCourses({\n      authContext,\n      coursesContext\n    });\n    getUsers({\n      authContext\n    });\n    getRooms({\n      authContext,\n      roomsContext\n    });\n  }, []);\n  let times = [];\n  let depts = {\n    \"Year 1\": [],\n    \"Year 2\": [],\n    \"Year 3\": []\n  };\n\n  if (timetable) {\n    times = [{\n      id: \"monday\",\n      time: `${timetable.monday_availability_from} ${timetable.monday_availability_to}`\n    }, {\n      id: \"tuesday\",\n      time: `${timetable.tuesday_availability_from} ${timetable.tuesday_availability_to}`\n    }, {\n      id: \"wednesday\",\n      time: `${timetable.wednesday_availability_from} ${timetable.wednesday_availability_to}`\n    }, {\n      id: \"thursday\",\n      time: `${timetable.thursday_availability_from} ${timetable.thursday_availability_to}`\n    }, {\n      id: \"friday\",\n      time: `${timetable.friday_availability_from} ${timetable.friday_availability_to}`\n    }];\n    ev = {\n      monday: [{\n        id: 1,\n        name: '',\n        type: '',\n        startTime: moment().weekday(-7).set({\n          hour: timetable.monday_availability_from,\n          minutes: 0\n        }),\n        endTime: moment().weekday(-7).set({\n          hour: timetable.monday_availability_to,\n          minutes: 0\n        })\n      }],\n      tuesday: [{\n        id: 2,\n        name: '',\n        type: '',\n        startTime: moment().weekday(-7).set({\n          hour: timetable.tuesday_availability_from,\n          minutes: 0\n        }),\n        endTime: moment().weekday(-7).set({\n          hour: timetable.tuesday_availability_to,\n          minutes: 0\n        })\n      }],\n      wednesday: [{\n        id: 3,\n        name: '',\n        type: '',\n        startTime: moment().weekday(-7).set({\n          hour: timetable.wednesday_availability_from,\n          minutes: 0\n        }),\n        endTime: moment().weekday(-7).set({\n          hour: timetable.wednesday_availability_to,\n          minutes: 0\n        })\n      }],\n      thursday: [{\n        id: 4,\n        name: '',\n        type: '',\n        startTime: moment().weekday(-7).set({\n          hour: timetable.thursday_availability_from,\n          minutes: 0\n        }),\n        endTime: moment().weekday(-7).set({\n          hour: timetable.thursday_availability_to,\n          minutes: 0\n        })\n      }],\n      friday: [{\n        id: 5,\n        name: '',\n        type: '',\n        startTime: moment().weekday(-7).set({\n          hour: timetable.friday_availability_from,\n          minutes: 0\n        }),\n        endTime: moment().weekday(-7).set({\n          hour: timetable.friday_availability_to,\n          minutes: 0\n        })\n      }]\n    };\n  }\n\n  if (courses) {\n    courses.forEach((course, index) => {\n      if (index < (courses.length - 1) / 3) {\n        depts['Year 1'].push(course);\n      }\n\n      if (index > (courses.length - 1) / 3 && index < (courses.length - 1) * 2 / 3) {\n        depts['Year 2'].push(course);\n      }\n\n      if (index > (courses.length - 1) * 2 / 3) {\n        depts['Year 3'].push(course);\n      }\n    });\n  }\n\n  const localizer = momentLocalizer(moment);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(PageContent, {\n    type: 'web',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }\n  }, !timetable && !loading && /*#__PURE__*/React.createElement(FiltersWeb, {\n    filterFields: filterFields,\n    filters: filters,\n    removeFilter: removeFilter,\n    handleFilter: handleFilter,\n    button: {\n      url: '/timetable/create',\n      text: 'Create timetable'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 21\n    }\n  }), !timetable && /*#__PURE__*/React.createElement(EmptyData, {\n    data: 'No timetable defined',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 21\n    }\n  }), timetable && /*#__PURE__*/React.createElement(Timetable, {\n    rooms: rooms,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 25\n    }\n  }) // <Calendar\n  //     localizer={localizer}\n  //     events={events}\n  //     startAccessor=\"start\"\n  //     endAccessor=\"end\"\n  //     style={{height: 500}}\n  // />\n  , loading && /*#__PURE__*/React.createElement(Loader, {\n    web: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 32\n    }\n  }), timetable && /*#__PURE__*/React.createElement(StaffFormFooter, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(FormItem, {\n    style: {\n      width: 'fit-content'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(SecondaryButton, {\n    filled: true,\n    onClick: () => {\n      assignTimetable({\n        authContext,\n        timetableContext,\n        history,\n        courses,\n        users,\n        events: ev,\n        times,\n        depts,\n        rooms\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 29\n    }\n  }, \"Create timetable\")))));\n}\n\nexport default withRouter(TimetableListingWeb);","map":{"version":3,"sources":["/Users/emilian.radu/Developer/AIProject/frontend/src/components/Timetable/listing/TimetableListingWeb.js"],"names":["React","useContext","useEffect","PageContent","FiltersWeb","Loader","EmptyData","moment","withRouter","FormItem","StaffFormFooter","SecondaryButton","assignTimetable","AuthContext","TimetableContext","CoursesContext","getCourses","getUsers","RoomsContext","getRooms","Calendar","momentLocalizer","Timetable","TimetableListingWeb","timetable","filters","filterFields","removeFilter","handleFilter","loading","history","scheduler","authContext","timetableContext","coursesContext","courses","state","events","ev","users","roomsContext","rooms","times","depts","id","time","monday_availability_from","monday_availability_to","tuesday_availability_from","tuesday_availability_to","wednesday_availability_from","wednesday_availability_to","thursday_availability_from","thursday_availability_to","friday_availability_from","friday_availability_to","monday","name","type","startTime","weekday","set","hour","minutes","endTime","tuesday","wednesday","thursday","friday","forEach","course","index","length","push","localizer","url","text","width"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,UAAf,EAA2BC,SAA3B,QAA2C,OAA3C;AACA,SAAQC,WAAR,QAA0B,gCAA1B;AACA,OAAOC,UAAP,MAAuB,gCAAvB;AACA,SAAQC,MAAR,QAAqB,6BAArB;AACA,OAAOC,SAAP,MAAsB,kCAAtB;AACA,OAAOC,MAAP,MAAmB,iBAAnB;AACA,SAAQC,UAAR,QAAyB,kBAAzB;AACA,SAAQC,QAAR,EAAkBC,eAAlB,QAAwC,6BAAxC;AACA,SAAQC,eAAR,QAA8B,+BAA9B;AACA,SAAQC,eAAR,QAA8B,qBAA9B;AACA,SAAQC,WAAR,QAA0B,wBAA1B;AACA,SAAQC,gBAAR,QAA+B,qBAA/B;AACA,SAAQC,cAAR,QAA6B,8BAA7B;AACA,SAAQC,UAAR,QAAyB,8BAAzB;AACA,SAAQC,QAAR,QAAuB,wBAAvB;AACA,SAAQC,YAAR,QAA2B,0BAA3B;AACA,SAAQC,QAAR,QAAuB,0BAAvB;AACA,SAAQC,QAAR,EAAkBC,eAAlB,QAAwC,oBAAxC;AACA,OAAOC,SAAP,MAAsB,aAAtB;;AAEA,SAASC,mBAAT,CAA6B;AAACC,EAAAA,SAAD;AAAYC,EAAAA,OAAZ;AAAqBC,EAAAA,YAArB;AAAmCC,EAAAA,YAAnC;AAAiDC,EAAAA,YAAjD;AAA+DC,EAAAA,OAA/D;AAAwEC,EAAAA,OAAxE;AAAiFC,EAAAA;AAAjF,CAA7B,EAA0H;AACtH,QAAMC,WAAW,GAAG/B,UAAU,CAACY,WAAD,CAA9B;AACA,QAAMoB,gBAAgB,GAAGhC,UAAU,CAACa,gBAAD,CAAnC;AACA,QAAMoB,cAAc,GAAGjC,UAAU,CAACc,cAAD,CAAjC;AACA,QAAM;AAACoB,IAAAA;AAAD,MAAYD,cAAc,CAACE,KAAjC;AAEA,QAAMC,MAAM,GAAG,EAAf;AACA,MAAIC,EAAE,GAAG,EAAT;AACA,QAAM;AAACC,IAAAA;AAAD,MAAUP,WAAW,CAACI,KAA5B;AACA,QAAMI,YAAY,GAAGvC,UAAU,CAACiB,YAAD,CAA/B;AACA,QAAM;AAACuB,IAAAA;AAAD,MAAUD,YAAY,CAACJ,KAA7B;AACAlC,EAAAA,SAAS,CAAC,MAAM;AACZc,IAAAA,UAAU,CAAC;AAACgB,MAAAA,WAAD;AAAcE,MAAAA;AAAd,KAAD,CAAV;AACAjB,IAAAA,QAAQ,CAAC;AAACe,MAAAA;AAAD,KAAD,CAAR;AACAb,IAAAA,QAAQ,CAAC;AAACa,MAAAA,WAAD;AAAcQ,MAAAA;AAAd,KAAD,CAAR;AACH,GAJQ,EAIN,EAJM,CAAT;AAKA,MAAIE,KAAK,GAAG,EAAZ;AACA,MAAIC,KAAK,GAAG;AAAC,cAAU,EAAX;AAAe,cAAU,EAAzB;AAA6B,cAAU;AAAvC,GAAZ;;AACA,MAAInB,SAAJ,EAAe;AACXkB,IAAAA,KAAK,GAAG,CACJ;AACIE,MAAAA,EAAE,EAAE,QADR;AAEIC,MAAAA,IAAI,EAAG,GAAErB,SAAS,CAACsB,wBAAyB,IAAGtB,SAAS,CAACuB,sBAAuB;AAFpF,KADI,EAKJ;AACIH,MAAAA,EAAE,EAAE,SADR;AAEIC,MAAAA,IAAI,EAAG,GAAErB,SAAS,CAACwB,yBAA0B,IAAGxB,SAAS,CAACyB,uBAAwB;AAFtF,KALI,EASJ;AACIL,MAAAA,EAAE,EAAE,WADR;AAEIC,MAAAA,IAAI,EAAG,GAAErB,SAAS,CAAC0B,2BAA4B,IAAG1B,SAAS,CAAC2B,yBAA0B;AAF1F,KATI,EAaJ;AACIP,MAAAA,EAAE,EAAE,UADR;AAEIC,MAAAA,IAAI,EAAG,GAAErB,SAAS,CAAC4B,0BAA2B,IAAG5B,SAAS,CAAC6B,wBAAyB;AAFxF,KAbI,EAiBJ;AACIT,MAAAA,EAAE,EAAE,QADR;AAEIC,MAAAA,IAAI,EAAG,GAAErB,SAAS,CAAC8B,wBAAyB,IAAG9B,SAAS,CAAC+B,sBAAuB;AAFpF,KAjBI,CAAR;AAsBAjB,IAAAA,EAAE,GAAG;AACDkB,MAAAA,MAAM,EAAE,CACJ;AACIZ,QAAAA,EAAE,EAAE,CADR;AAEIa,QAAAA,IAAI,EAAE,EAFV;AAGIC,QAAAA,IAAI,EAAE,EAHV;AAIIC,QAAAA,SAAS,EAAEpD,MAAM,GAAGqD,OAAT,CAAiB,CAAC,CAAlB,EAAqBC,GAArB,CAAyB;AAACC,UAAAA,IAAI,EAAEtC,SAAS,CAACsB,wBAAjB;AAA2CiB,UAAAA,OAAO,EAAE;AAApD,SAAzB,CAJf;AAKIC,QAAAA,OAAO,EAAEzD,MAAM,GAAGqD,OAAT,CAAiB,CAAC,CAAlB,EAAqBC,GAArB,CAAyB;AAACC,UAAAA,IAAI,EAAEtC,SAAS,CAACuB,sBAAjB;AAAyCgB,UAAAA,OAAO,EAAE;AAAlD,SAAzB;AALb,OADI,CADP;AAUDE,MAAAA,OAAO,EAAE,CACL;AACIrB,QAAAA,EAAE,EAAE,CADR;AAEIa,QAAAA,IAAI,EAAE,EAFV;AAGIC,QAAAA,IAAI,EAAE,EAHV;AAIIC,QAAAA,SAAS,EAAEpD,MAAM,GAAGqD,OAAT,CAAiB,CAAC,CAAlB,EAAqBC,GAArB,CAAyB;AAACC,UAAAA,IAAI,EAAEtC,SAAS,CAACwB,yBAAjB;AAA4Ce,UAAAA,OAAO,EAAE;AAArD,SAAzB,CAJf;AAKIC,QAAAA,OAAO,EAAEzD,MAAM,GAAGqD,OAAT,CAAiB,CAAC,CAAlB,EAAqBC,GAArB,CAAyB;AAACC,UAAAA,IAAI,EAAEtC,SAAS,CAACyB,uBAAjB;AAA0Cc,UAAAA,OAAO,EAAE;AAAnD,SAAzB;AALb,OADK,CAVR;AAmBDG,MAAAA,SAAS,EAAE,CACP;AACItB,QAAAA,EAAE,EAAE,CADR;AAEIa,QAAAA,IAAI,EAAE,EAFV;AAGIC,QAAAA,IAAI,EAAE,EAHV;AAIIC,QAAAA,SAAS,EAAEpD,MAAM,GAAGqD,OAAT,CAAiB,CAAC,CAAlB,EAAqBC,GAArB,CAAyB;AAACC,UAAAA,IAAI,EAAEtC,SAAS,CAAC0B,2BAAjB;AAA8Ca,UAAAA,OAAO,EAAE;AAAvD,SAAzB,CAJf;AAKIC,QAAAA,OAAO,EAAEzD,MAAM,GAAGqD,OAAT,CAAiB,CAAC,CAAlB,EAAqBC,GAArB,CAAyB;AAACC,UAAAA,IAAI,EAAEtC,SAAS,CAAC2B,yBAAjB;AAA4CY,UAAAA,OAAO,EAAE;AAArD,SAAzB;AALb,OADO,CAnBV;AA4BDI,MAAAA,QAAQ,EAAE,CACN;AACIvB,QAAAA,EAAE,EAAE,CADR;AAEIa,QAAAA,IAAI,EAAE,EAFV;AAGIC,QAAAA,IAAI,EAAE,EAHV;AAIIC,QAAAA,SAAS,EAAEpD,MAAM,GAAGqD,OAAT,CAAiB,CAAC,CAAlB,EAAqBC,GAArB,CAAyB;AAACC,UAAAA,IAAI,EAAEtC,SAAS,CAAC4B,0BAAjB;AAA6CW,UAAAA,OAAO,EAAE;AAAtD,SAAzB,CAJf;AAKIC,QAAAA,OAAO,EAAEzD,MAAM,GAAGqD,OAAT,CAAiB,CAAC,CAAlB,EAAqBC,GAArB,CAAyB;AAACC,UAAAA,IAAI,EAAEtC,SAAS,CAAC6B,wBAAjB;AAA2CU,UAAAA,OAAO,EAAE;AAApD,SAAzB;AALb,OADM,CA5BT;AAqCDK,MAAAA,MAAM,EAAE,CACJ;AACIxB,QAAAA,EAAE,EAAE,CADR;AAEIa,QAAAA,IAAI,EAAE,EAFV;AAGIC,QAAAA,IAAI,EAAE,EAHV;AAIIC,QAAAA,SAAS,EAAEpD,MAAM,GAAGqD,OAAT,CAAiB,CAAC,CAAlB,EAAqBC,GAArB,CAAyB;AAACC,UAAAA,IAAI,EAAEtC,SAAS,CAAC8B,wBAAjB;AAA2CS,UAAAA,OAAO,EAAE;AAApD,SAAzB,CAJf;AAKIC,QAAAA,OAAO,EAAEzD,MAAM,GAAGqD,OAAT,CAAiB,CAAC,CAAlB,EAAqBC,GAArB,CAAyB;AAACC,UAAAA,IAAI,EAAEtC,SAAS,CAAC+B,sBAAjB;AAAyCQ,UAAAA,OAAO,EAAE;AAAlD,SAAzB;AALb,OADI;AArCP,KAAL;AA+CH;;AACD,MAAI5B,OAAJ,EAAa;AACTA,IAAAA,OAAO,CAACkC,OAAR,CAAgB,CAACC,MAAD,EAASC,KAAT,KAAmB;AAC/B,UAAIA,KAAK,GAAG,CAACpC,OAAO,CAACqC,MAAR,GAAiB,CAAlB,IAAuB,CAAnC,EAAsC;AAClC7B,QAAAA,KAAK,CAAC,QAAD,CAAL,CAAgB8B,IAAhB,CAAqBH,MAArB;AACH;;AACD,UAAIC,KAAK,GAAG,CAACpC,OAAO,CAACqC,MAAR,GAAiB,CAAlB,IAAuB,CAA/B,IAAoCD,KAAK,GAAG,CAACpC,OAAO,CAACqC,MAAR,GAAiB,CAAlB,IAAuB,CAAvB,GAA2B,CAA3E,EAA8E;AAC1E7B,QAAAA,KAAK,CAAC,QAAD,CAAL,CAAgB8B,IAAhB,CAAqBH,MAArB;AAEH;;AACD,UAAIC,KAAK,GAAG,CAACpC,OAAO,CAACqC,MAAR,GAAiB,CAAlB,IAAuB,CAAvB,GAA2B,CAAvC,EAA0C;AACtC7B,QAAAA,KAAK,CAAC,QAAD,CAAL,CAAgB8B,IAAhB,CAAqBH,MAArB;AAEH;AACJ,KAZD;AAaH;;AACD,QAAMI,SAAS,GAAGrD,eAAe,CAACd,MAAD,CAAjC;AACA,sBACI,uDACI,oBAAC,WAAD;AAAa,IAAA,IAAI,EAAE,KAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEQ,CAACiB,SAAD,IAAc,CAACK,OAAf,iBACA,oBAAC,UAAD;AACI,IAAA,YAAY,EAAEH,YADlB;AAEI,IAAA,OAAO,EAAED,OAFb;AAGI,IAAA,YAAY,EAAEE,YAHlB;AAII,IAAA,YAAY,EAAEC,YAJlB;AAKI,IAAA,MAAM,EAAE;AAAC+C,MAAAA,GAAG,EAAE,mBAAN;AAA2BC,MAAAA,IAAI,EAAE;AAAjC,KALZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHR,EAYQ,CAACpD,SAAD,iBACA,oBAAC,SAAD;AAAW,IAAA,IAAI,EAAE,sBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAbR,EAgBQA,SAAS,iBACL,oBAAC,SAAD;AAAW,IAAA,KAAK,EAAEiB,KAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAjBZ,CAkBQ;AACA;AACA;AACA;AACA;AACA;AACA;AAxBR,IA4BQZ,OAAO,iBAAI,oBAAC,MAAD;AAAQ,IAAA,GAAG,MAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA5BnB,EA+BQL,SAAS,iBACT,oBAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,QAAD;AAAU,IAAA,KAAK,EAAE;AAACqD,MAAAA,KAAK,EAAE;AAAR,KAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,eAAD;AAAiB,IAAA,MAAM,MAAvB;AAAwB,IAAA,OAAO,EAAE,MAAM;AACnCjE,MAAAA,eAAe,CAAC;AACZoB,QAAAA,WADY;AACCC,QAAAA,gBADD;AACmBH,QAAAA,OADnB;AAC4BK,QAAAA,OAD5B;AACqCI,QAAAA,KADrC;AAC4CF,QAAAA,MAAM,EAAEC,EADpD;AACwDI,QAAAA,KADxD;AAC+DC,QAAAA,KAD/D;AACsEF,QAAAA;AADtE,OAAD,CAAf;AAGH,KAJD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADJ,CADJ,CAhCR,CADJ,CADJ;AAgDH;;AAGD,eAAejC,UAAU,CAACe,mBAAD,CAAzB","sourcesContent":["import React, {useContext, useEffect} from 'react'\nimport {PageContent} from '../../../styles/shared/wrapper'\nimport FiltersWeb from '../../Global/Filter/FiltersWeb'\nimport {Loader} from '../../Global/InfiniteScroll'\nimport EmptyData from \"../../Global/EmptyData/EmptyData\";\nimport moment from 'moment-timezone'\nimport {withRouter} from 'react-router-dom'\nimport {FormItem, StaffFormFooter} from \"../../../styles/shared/form\";\nimport {SecondaryButton} from \"../../../styles/shared/button\";\nimport {assignTimetable} from \"../TimetableActions\";\nimport {AuthContext} from \"../../Auth/AuthContext\";\nimport {TimetableContext} from \"../TimetableContext\";\nimport {CoursesContext} from \"../../Courses/CoursesContext\";\nimport {getCourses} from \"../../Courses/CoursesActions\";\nimport {getUsers} from \"../../Auth/AuthActions\";\nimport {RoomsContext} from \"../../Rooms/RoomsContext\";\nimport {getRooms} from \"../../Rooms/RoomsActions\";\nimport {Calendar, momentLocalizer} from 'react-big-calendar'\nimport Timetable from \"./Timetable\";\n\nfunction TimetableListingWeb({timetable, filters, filterFields, removeFilter, handleFilter, loading, history, scheduler}) {\n    const authContext = useContext(AuthContext)\n    const timetableContext = useContext(TimetableContext)\n    const coursesContext = useContext(CoursesContext)\n    const {courses} = coursesContext.state\n\n    const events = []\n    let ev = []\n    const {users} = authContext.state\n    const roomsContext = useContext(RoomsContext)\n    const {rooms} = roomsContext.state\n    useEffect(() => {\n        getCourses({authContext, coursesContext})\n        getUsers({authContext})\n        getRooms({authContext, roomsContext})\n    }, [])\n    let times = []\n    let depts = {\"Year 1\": [], \"Year 2\": [], \"Year 3\": []}\n    if (timetable) {\n        times = [\n            {\n                id: \"monday\",\n                time: `${timetable.monday_availability_from} ${timetable.monday_availability_to}`\n            },\n            {\n                id: \"tuesday\",\n                time: `${timetable.tuesday_availability_from} ${timetable.tuesday_availability_to}`\n            },\n            {\n                id: \"wednesday\",\n                time: `${timetable.wednesday_availability_from} ${timetable.wednesday_availability_to}`\n            },\n            {\n                id: \"thursday\",\n                time: `${timetable.thursday_availability_from} ${timetable.thursday_availability_to}`\n            },\n            {\n                id: \"friday\",\n                time: `${timetable.friday_availability_from} ${timetable.friday_availability_to}`\n            }\n        ]\n        ev = {\n            monday: [\n                {\n                    id: 1,\n                    name: '',\n                    type: '',\n                    startTime: moment().weekday(-7).set({hour: timetable.monday_availability_from, minutes: 0}),\n                    endTime: moment().weekday(-7).set({hour: timetable.monday_availability_to, minutes: 0})\n                }\n            ],\n            tuesday: [\n                {\n                    id: 2,\n                    name: '',\n                    type: '',\n                    startTime: moment().weekday(-7).set({hour: timetable.tuesday_availability_from, minutes: 0}),\n                    endTime: moment().weekday(-7).set({hour: timetable.tuesday_availability_to, minutes: 0})\n                },\n            ],\n            wednesday: [\n                {\n                    id: 3,\n                    name: '',\n                    type: '',\n                    startTime: moment().weekday(-7).set({hour: timetable.wednesday_availability_from, minutes: 0}),\n                    endTime: moment().weekday(-7).set({hour: timetable.wednesday_availability_to, minutes: 0})\n                },\n            ],\n            thursday: [\n                {\n                    id: 4,\n                    name: '',\n                    type: '',\n                    startTime: moment().weekday(-7).set({hour: timetable.thursday_availability_from, minutes: 0}),\n                    endTime: moment().weekday(-7).set({hour: timetable.thursday_availability_to, minutes: 0})\n                },\n            ],\n            friday: [\n                {\n                    id: 5,\n                    name: '',\n                    type: '',\n                    startTime: moment().weekday(-7).set({hour: timetable.friday_availability_from, minutes: 0}),\n                    endTime: moment().weekday(-7).set({hour: timetable.friday_availability_to, minutes: 0})\n                },\n            ]\n        }\n    }\n    if (courses) {\n        courses.forEach((course, index) => {\n            if (index < (courses.length - 1) / 3) {\n                depts['Year 1'].push(course)\n            }\n            if (index > (courses.length - 1) / 3 && index < (courses.length - 1) * 2 / 3) {\n                depts['Year 2'].push(course)\n\n            }\n            if (index > (courses.length - 1) * 2 / 3) {\n                depts['Year 3'].push(course)\n\n            }\n        })\n    }\n    const localizer = momentLocalizer(moment)\n    return (\n        <>\n            <PageContent type={'web'}>\n                {\n                    !timetable && !loading &&\n                    <FiltersWeb\n                        filterFields={filterFields}\n                        filters={filters}\n                        removeFilter={removeFilter}\n                        handleFilter={handleFilter}\n                        button={{url: '/timetable/create', text: 'Create timetable'}}\n                    />\n                }\n                {\n                    !timetable &&\n                    <EmptyData data={'No timetable defined'}/>\n                }\n                {\n                    timetable &&\n                        <Timetable rooms={rooms}/>\n                    // <Calendar\n                    //     localizer={localizer}\n                    //     events={events}\n                    //     startAccessor=\"start\"\n                    //     endAccessor=\"end\"\n                    //     style={{height: 500}}\n                    // />\n                }\n\n                {\n                    loading && <Loader web/>\n                }\n                {\n                    timetable &&\n                    <StaffFormFooter>\n                        <FormItem style={{width: 'fit-content'}}>\n                            <SecondaryButton filled onClick={() => {\n                                assignTimetable({\n                                    authContext, timetableContext, history, courses, users, events: ev, times, depts, rooms\n                                })\n                            }}\n                            >Create timetable</SecondaryButton>\n                        </FormItem>\n                    </StaffFormFooter>\n                }\n            </PageContent>\n        </>\n    )\n}\n\n\nexport default withRouter(TimetableListingWeb)\n"]},"metadata":{},"sourceType":"module"}